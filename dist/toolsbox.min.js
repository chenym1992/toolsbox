/*!
 * Toolsbox.js v0.0.2
 * (c) 2014-2022 chenym1992
 * Released under the MIT License.
 */
!(function (t, e) {
  'object' == typeof exports && 'undefined' != typeof module
    ? e(exports)
    : 'function' == typeof define && define.amd
    ? define(['exports'], e)
    : e(
        ((t =
          'undefined' != typeof globalThis ? globalThis : t || self).Toolsbox =
          {})
      )
})(this, function (t) {
  'use strict'
  var e
  function n(t) {
    return (
      (n =
        'function' == typeof Symbol && 'symbol' == typeof Symbol.iterator
          ? function (t) {
              return typeof t
            }
          : function (t) {
              return t &&
                'function' == typeof Symbol &&
                t.constructor === Symbol &&
                t !== Symbol.prototype
                ? 'symbol'
                : typeof t
            }),
      n(t)
    )
  }
  function r(t, e) {
    for (var n = 0; n < e.length; n++) {
      var r = e[n]
      ;(r.enumerable = r.enumerable || !1),
        (r.configurable = !0),
        'value' in r && (r.writable = !0),
        Object.defineProperty(t, r.key, r)
    }
  }
  function o(t, e, n) {
    return (
      e in t
        ? Object.defineProperty(t, e, {
            value: n,
            enumerable: !0,
            configurable: !0,
            writable: !0
          })
        : (t[e] = n),
      t
    )
  }
  function i(t) {
    return (
      (function (t) {
        if (Array.isArray(t)) return a(t)
      })(t) ||
      (function (t) {
        if (
          ('undefined' != typeof Symbol && null != t[Symbol.iterator]) ||
          null != t['@@iterator']
        )
          return Array.from(t)
      })(t) ||
      (function (t, e) {
        if (!t) return
        if ('string' == typeof t) return a(t, e)
        var n = Object.prototype.toString.call(t).slice(8, -1)
        'Object' === n && t.constructor && (n = t.constructor.name)
        if ('Map' === n || 'Set' === n) return Array.from(t)
        if (
          'Arguments' === n ||
          /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)
        )
          return a(t, e)
      })(t) ||
      (function () {
        throw new TypeError(
          'Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.'
        )
      })()
    )
  }
  function a(t, e) {
    ;(null == e || e > t.length) && (e = t.length)
    for (var n = 0, r = new Array(e); n < e; n++) r[n] = t[n]
    return r
  }
  function c(t) {
    return null === t
      ? 'null'
      : 'object' !== n(t)
      ? n(t)
      : Object.prototype.toString.call(t).slice(8, -1).toLocaleLowerCase()
  }
  function u(t) {
    return 'number' === c(t)
  }
  function s(t) {
    return 'undefined' === c(t)
  }
  function f(t) {
    return 'null' === c(t)
  }
  function l(t) {
    return 'object' === c(t)
  }
  function p(t) {
    return 'array' === c(t)
  }
  var h = (function () {
    function t() {
      !(function (t, e) {
        if (!(t instanceof e))
          throw new TypeError('Cannot call a class as a function')
      })(this, t),
        o(this, '__events', new Map()),
        o(this, '__once', new Map())
    }
    var e, n, a
    return (
      (e = t),
      (n = [
        {
          key: 'on',
          value: function (t, e) {
            var n = this
            if (l(t)) {
              for (var r in t)
                if (t.hasOwnProperty(r)) {
                  var o = this.__events.get(r)
                  o || ((o = new Set()), this.__events.set(r, o)), o.add(t[r])
                }
            } else
              t.split(' ').forEach(function (t) {
                var r = n.__events.get(t)
                r || ((r = new Set()), n.__events.set(t, r)), e && r.add(e)
              })
          }
        },
        {
          key: 'off',
          value: function (t, e) {
            var n = this
            if (l(t)) {
              for (var r in t)
                if (null != t && t.hasOwnProperty(r)) {
                  var o = this.__events.get(r)
                  o && e && o.delete(e)
                  var i = this.__once.get(r)
                  i && e && i.delete(e)
                }
            } else
              t
                ? t.split(' ').forEach(function (t) {
                    var r = n.__events.get(t)
                    r && e && r.delete(e)
                    var o = n.__once.get(t)
                    o && e && o.delete(e)
                  })
                : ((this.__events = new Map()), (this.__once = new Map()))
          }
        },
        {
          key: 'once',
          value: function (t, e) {
            var n = this
            if (l(t)) {
              for (var r in t)
                if (t.hasOwnProperty(r)) {
                  var o = this.__once.get(r)
                  o || ((o = new Set()), this.__once.set(r, o)), o.add(e)
                }
            } else
              t.split(' ').forEach(function (t) {
                var r = n.__once.get(t)
                r || ((r = new Set()), n.__once.set(t, r)), r.add(e)
              })
          }
        },
        {
          key: 'emit',
          value: function (t, e) {
            var n = this.__events.get(t)
            if (n) {
              i(n).forEach(function (t) {
                return t(e)
              })
              var r = this.__once.get(t)
              r &&
                (i(r).forEach(function (t) {
                  return t(e)
                }),
                this.__once.delete(t))
            }
          }
        }
      ]) && r(e.prototype, n),
      a && r(e, a),
      Object.defineProperty(e, 'prototype', { writable: !1 }),
      t
    )
  })()
  ;(t.EventEmitter = h),
    (t.byteToString = function (t) {
      var e, n, r, o, i, a
      for (e = '', r = t.length, n = 0; n < r; )
        switch ((o = t[n++]) >> 4) {
          case 0:
          case 1:
          case 2:
          case 3:
          case 4:
          case 5:
          case 6:
          case 7:
            e += String.fromCharCode(o)
            break
          case 12:
          case 13:
            ;(i = t[n++]),
              (e += String.fromCharCode(((31 & o) << 6) | (63 & i)))
            break
          case 14:
            ;(i = t[n++]),
              (a = t[n++]),
              (e += String.fromCharCode(
                ((15 & o) << 12) | ((63 & i) << 6) | ((63 & a) << 0)
              ))
        }
      return e
    }),
    (t.classof = c),
    (t.dateFormat = function (t) {
      var e =
          arguments.length > 1 && void 0 !== arguments[1]
            ? arguments[1]
            : 'YYYY-MM-DD HH:mm:ss',
        n = t ? new Date(t) : new Date(),
        r = n.getFullYear() + '',
        o = n.getMonth() + 1,
        i = n.getDate(),
        a = n.getHours(),
        c = n.getMinutes(),
        u = n.getSeconds()
      return e
        .replace(/YYYY|yyyy/g, r)
        .replace(/YY|yy/g, r.substring(2, 4))
        .replace(/MM/g, (o < 10 ? '0' : '') + o)
        .replace(/DD/g, (i < 10 ? '0' : '') + i)
        .replace(/HH|hh/g, (a < 10 ? '0' : '') + a)
        .replace(/mm/g, (c < 10 ? '0' : '') + c)
        .replace(/ss/g, (u < 10 ? '0' : '') + u)
    }),
    (t.debounce = function (t) {
      var n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0
      return function () {
        for (var r = arguments.length, o = new Array(r), i = 0; i < r; i++)
          o[i] = arguments[i]
        e && clearTimeout(e),
          (e = setTimeout(function () {
            t.call(this, o)
          }, n))
      }
    }),
    (t.getUrlParams = function (t, e) {
      var r, o
      if (
        !(t =
          t ||
          (null === (r = window) ||
          void 0 === r ||
          null === (o = r.location) ||
          void 0 === o
            ? void 0
            : o.href)) ||
        t.split('?').length < 2 ||
        !t.split('&').length
      )
        return e ? void 0 : {}
      var i = t.split('?')[1].split('&'),
        a = {}
      return (
        i.forEach(function (t) {
          var e = t.split('=')[0],
            r = decodeURIComponent(t.split('=')[1])
          if (Object.keys(a).indexOf(e) > -1 && 'string' == typeof a[e]) {
            var o = [a[e], r]
            a[e] = o
          } else 'object' === n(a[e]) ? a[e].push(r) : (a[e] = r)
        }),
        e ? a[e] : a
      )
    }),
    (t.isArray = p),
    (t.isBigInt = function (t) {
      return 'bigint' === c(t)
    }),
    (t.isBoolean = function (t) {
      return 'boolean' === c(t)
    }),
    (t.isDate = function (t) {
      return 'date' === c(t)
    }),
    (t.isFunction = function (t) {
      return 'function' === c(t)
    }),
    (t.isNaN = function (t) {
      return u(t) && t != +t
    }),
    (t.isNil = function (t) {
      return f(t) || s(t)
    }),
    (t.isNull = f),
    (t.isNumber = u),
    (t.isObject = l),
    (t.isRegExp = function (t) {
      return 'regexp' === c(t)
    }),
    (t.isString = function (t) {
      return 'string' === c(t)
    }),
    (t.isSymbol = function (t) {
      return 'symbol' === c(t)
    }),
    (t.isUndefined = s),
    (t.makeDurationPretty = function (t) {
      var e =
        arguments.length > 1 && void 0 !== arguments[1]
          ? arguments[1]
          : { d: '天', h: '时', m: '分', s: '秒' }
      if (t <= 0) return 0
      var n = e.d,
        r = e.h,
        o = e.m,
        i = e.s,
        a = t / 60 / 60 / 24,
        c = Math.floor(a),
        u = ''.concat(c > 0 ? ''.concat(c).concat(n) : ''),
        s = t / 60 / 60 - 24 * c,
        f = Math.floor(s),
        l = ''.concat(f > 0 ? ''.concat(f).concat(r) : ''),
        p = t / 60 - 1440 * c - 60 * f,
        h = Math.floor(p),
        y = ''.concat(h > 0 ? ''.concat(h).concat(o) : ''),
        v = t - 86400 * c - 3600 * f - 60 * h,
        d = Math.floor(v),
        g = ''.concat(d > 0 ? ''.concat(d).concat(i) : ''),
        b = ''.concat(u).concat(l).concat(y).concat(g)
      return b
    }),
    (t.stringToByte = function (t) {
      for (var e, n = [], r = t.length, o = 0; o < r; o++)
        (e = t.charCodeAt(o)) >= 65536 && e <= 1114111
          ? (n.push(((e >> 18) & 7) | 240),
            n.push(((e >> 12) & 63) | 128),
            n.push(((e >> 6) & 63) | 128),
            n.push((63 & e) | 128))
          : e >= 2048 && e <= 65535
          ? (n.push(((e >> 12) & 15) | 224),
            n.push(((e >> 6) & 63) | 128),
            n.push((63 & e) | 128))
          : e >= 128 && e <= 2047
          ? (n.push(((e >> 6) & 31) | 192), n.push((63 & e) | 128))
          : n.push(255 & e)
      return n
    }),
    (t.stringifyQueryString = function (t) {
      var e = [],
        n = function (n) {
          if (Object.prototype.hasOwnProperty.call(t, n)) {
            var r = t[n]
            p(r)
              ? r.forEach(function (t) {
                  e.push(''.concat(n, '=').concat(t))
                })
              : l(r)
              ? e.push(
                  ''
                    .concat(n, '=')
                    .concat(encodeURIComponent(JSON.stringify(r)))
                )
              : e.push(''.concat(n, '=').concat(r))
          }
        }
      for (var r in t) n(r)
      return e.join('&')
    }),
    (t.throttle = function (t) {
      var e,
        n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 0,
        r = 0
      return function () {
        for (
          var o = this, i = arguments.length, a = new Array(i), c = 0;
          c < i;
          c++
        )
          a[c] = arguments[c]
        var u = +new Date()
        u - r < n
          ? (e && clearTimeout(e),
            (e = setTimeout(function () {
              ;(r = u), t.apply(o, a)
            }, n)))
          : ((r = u), t.apply(this, a))
      }
    }),
    Object.defineProperty(t, '__esModule', { value: !0 })
})
